document.addEventListener("DOMContentLoaded",function(){var f=document.querySelectorAll(".j-setting-tab li"),d=document.querySelector(".j-setting-notice"),g=document.querySelector("#j-version"),e=document.querySelector(".j-setting-contain > form"),h=document.querySelectorAll(".j-setting-content");f.forEach(function(a){a.addEventListener("click",function(){sessionStorage.setItem("j-setting-current",a.getAttribute("data-current"));f.forEach(function(b){return b.classList.remove("active")});a.classList.add("active");"j-setting-notice"===a.getAttribute("data-current")?(d.style.display="block",e.style.display="none"):(e.style.display="block",d.style.display="none");h.forEach(function(b){b.style.display="none";b.classList.contains(a.getAttribute("data-current"))&&(b.style.display="block")})})});sessionStorage.getItem("j-setting-current")?("j-setting-notice"===sessionStorage.getItem("j-setting-current")?(d.style.display="block",e.style.display="none"):(e.style.display="block",d.style.display="none"),f.forEach(function(a){a.getAttribute("data-current")===sessionStorage.getItem("j-setting-current")&&(a.classList.add("active"),h.forEach(function(b){b.classList.contains(sessionStorage.getItem("j-setting-current"))&&(b.style.display="block")}))})):(f[0].classList.add("active"),d.style.display="block",e.style.display="none");var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState)if(200<=c.status&&300>c.status||304===c.status){var a=JSON.parse(c.responseText).tag_name;var url=JSON.parse(c.responseText).html_url;d.innerHTML=a>g.innerHTML?'<h2 class="update">检测到版本更新！</h2><p>当前版本号：'+g.innerHTML+"</p><p><a href="+url+" target='_blank'>下载最新版本</a></p>":'<h2 class="no-update">当前已是最新版本！</h2><p>当前版本号：'+g.innerHTML+"</p><p>最新版本号："+a+"</p><p><a href="+url+" target='_blank'>下载最新版本</a></p>"}else d.innerHTML="请求失败！"};c.open("get","https://api.github.com/repos/appdev/TypechoMobile-plugin/releases/latest",!0);c.send(null)});
